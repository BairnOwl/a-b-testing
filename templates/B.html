<!DOCTYPE html>
<html lang="en">
  <head>
    <script type="text/javascript">      
        var timerStart = Date.now();
        console.log('Page Load:' + timerStart)
        var uniq_session = timerStart;
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../static/main.css" >
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <title>Find San Francisco Taxis online</title>
  </head>

  <body>
    <header>
      <h1>San Francisco Taxis</h1>
      <p>This page contains information about taxi and cab companies in San Francisco, CA.</p>
      <p>Not endorsed by any of the companies listed, or the city of San Francisco.</p>
    </header>
    
    <div class="vendor-wrapper">
      <img src="../static/sanFrancisco.png" class="vendor-photo" />
      <button class="vendor-book-button" id="mp1">Reserve with First Taxi Company</button>
    </div>

    <div class="vendor-wrapper">
      <img src="../static/sanfrancisco2.png" class="vendor-photo" />
      <button class="vendor-book-button" id="mp2">Reserve with Second Taxi Company</button>
    </div>

    <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script>
        var timeLoaded = Date.now()
          $(document).ready(function() {
            timeLoaded =  Date.now();
            console.log('Page Load:' + timeLoaded)
            //sendData(timeLoaded, 0)
          });

        $("#ca1").on("click", function(d) {
              // Retrieve the object from storage
              var clickTime = Date.now()
              var clickObjectID = 'ca1'
              console.log('Click Time:' + clickTime)
              sendData(timeLoaded, clickTime, clickObjectID, uniq_session)
        })


        $("#ca2").on("click", function(d) {
              // Retrieve the object from storage
              var clickTime = Date.now()
              var clickObjectID = 'ca2'
              console.log('Click Time:' + clickTime)
              sendData(timeLoaded, clickTime, clickObjectID, uniq_session)
        })


        function sendData(timeLoaded, clickTime, clickObjectID, cook){
              var dataObj = { 'version': 'B', 'pageLoadTime': timeLoaded , 'clickTime': clickTime , 'HtmlElementID': clickObjectID, 'UniqueSession' :uniq_session};
              console.log(JSON.stringify(dataObj))
               $.ajax({
                   type: 'POST',
                    url: '/data',
                    dataType: 'json',
                    contentType: 'application/json; charset=utf-8',
                    data: JSON.stringify(dataObj),
                    success: function(callback) {
                        console.log(callback);
                    },
                    error: function() {
                        $(this).html("error!");
                    }
              });
        }
        
     </script>
  </body>
</html>
